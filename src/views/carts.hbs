<h2>Carrito de Compras</h2>

{{#if cart.products.length}}
<ul>
    {{#each cart.products}}
    <li>
        <strong>{{this.product.title}}</strong> - ${{this.product.price}} x {{this.quantity}}

        <!-- Form para actualizar cantidad -->
        <form action="/api/carts/{{../cart._id}}/products/{{this.product._id}}" method="POST" style="display:inline;">
            <input type="number" name="quantity" value="{{this.quantity}}" min="1" required>
            <button type="submit">Actualizar cantidad</button>
        </form>

        <!-- Form para eliminar producto -->
        <form action="/api/carts/{{../cart._id}}/products/{{this.product._id}}?_method=DELETE" method="POST"
            style="display:inline;">
            <button type="submit">Eliminar</button>
        </form>
    </li>
    {{/each}}
</ul>

<div class="cart-summary">
    <p>
        Total: ${{total}}
    </p>
</div>

<!-- Botón para vaciar carrito -->
<form action="/api/carts/{{cart._id}}/empty?_method=DELETE" method="POST">
    <button type="submit">Vaciar Carrito</button>
</form>

{{else}}
<p>Tu carrito está vacío. ¡Agrega algunos productos!</p>
{{/if}}